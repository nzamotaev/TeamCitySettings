<?xml version="1.0" encoding="UTF-8"?>
<build-type xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" uuid="5f4081f8-b6ad-4151-bfa9-4411c1c737e8" xsi:noNamespaceSchemaLocation="http://www.jetbrains.com/teamcity/schemas/10.0/project-config.xsd">
  <name>Neptune3-ui android control application</name>
  <description />
  <settings>
    <options>
      <option name="artifactRules" value="%system.teamcity.build.tempDir%/install/**/*.apk" />
    </options>
    <parameters>
      <param name="BUILDARCH" value="armv7" spec="select data_5='x86' label_3='arm64' display='normal' label='Phone architecture' data_1='armv7' label_1='arm' data_3='arm64_v8a'" />
      <param name="env.ANDROID_SDK_ROOT" value="%env.ANDROID_HOME%" spec="text display='normal' readOnly='true' validationMode='any'" />
    </parameters>
    <build-runners>
      <runner id="RUNNER_121" name="" type="simpleRunner">
        <parameters>
          <param name="script.content"><![CDATA[mkdir ../install
%env.ANDROID_QT_SDK%/%QT_VERSION%/android_%BUILDARCH%/bin/qmake %system.teamcity.build.checkoutDir%/settings_app_android.pro -spec android-clang
make qmake_all
make -j $(nproc)
make INSTALL_ROOT=../install/ install
%env.ANDROID_QT_SDK%/%QT_VERSION%/android_%BUILDARCH%/bin/androiddeployqt --input ./src/remotesettings/app/android-libNeptuneControlApp.so-deployment-settings.json --output ../install --gradle]]></param>
          <param name="teamcity.build.workingDir" value="%system.teamcity.build.tempDir%/build/" />
          <param name="teamcity.step.mode" value="default" />
          <param name="use.custom.script" value="true" />
        </parameters>
      </runner>
    </build-runners>
    <vcs-settings>
      <vcs-entry-ref root-id="QtAutomotive_Components_HttpsGitLfsQtIoGerritTritonUiGit" />
    </vcs-settings>
    <requirements>
      <equals id="RQ_64" name="teamcity.agent.jvm.os.arch" value="amd64" />
      <exists id="RQ_65" name="env.ANDROID_HOME" />
      <exists id="RQ_74" name="env.ANDROID_NDK_ROOT" />
    </requirements>
    <build-triggers />
    <build-extensions>
      <extension id="swabra" type="swabra">
        <parameters>
          <param name="swabra.enabled" value="swabra.before.build" />
          <param name="swabra.strict" value="true" />
        </parameters>
      </extension>
      <extension id="perfmon" type="perfmon">
        <parameters />
      </extension>
    </build-extensions>
    <cleanup />
  </settings>
</build-type>

